<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTAC Î¦^(1/3) Spiral Visualization</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #0a192f;
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        h1 {
            text-align: center;
            color: #f77f00;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #a8dadc;
            margin-bottom: 30px;
            font-size: 14px;
        }
        #plot {
            width: 100%;
            height: 700px;
        }
        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }
        .info {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
            background: #1d3557;
            border-radius: 8px;
            line-height: 1.6;
        }
        .info h3 {
            color: #f77f00;
            margin-top: 0;
        }
        .info code {
            background: #0a192f;
            padding: 2px 6px;
            border-radius: 3px;
            color: #a8dadc;
        }
    </style>
</head>
<body>
    <h1>ðŸŒ€ UTAC Î¦^(1/3) Spiral Visualization</h1>
    <div class="subtitle">Interactive 3D exploration of the Î²-hierarchy</div>

    <div id="plot"></div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-color" style="background: #a8dadc;"></div>
            <span>Weakly Coupled (Î²: 2.0-3.5)</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #457b9d;"></div>
            <span>High-Dimensional (Î²: 3.0-4.5)</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #1d3557;"></div>
            <span>Strongly Coupled (Î²: 4.0-5.5)</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #e63946;"></div>
            <span>Physically Constrained (Î²: 7.0-10.0)</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #f77f00;"></div>
            <span>Meta-Adaptive (Î²: 10.0-25.0)</span>
        </div>
    </div>

    <div class="info">
        <h3>About the Î¦^(1/3) Spiral</h3>
        <p>
            This visualization shows how UTAC Î²-values scale according to the **cubic root of the golden ratio** (Î¦^(1/3) â‰ˆ 1.174).
        </p>
        <p>
            <strong>Key Insights:</strong>
        </p>
        <ul>
            <li>Each system's position is determined by its Î²-value (radius = Î² / 4)</li>
            <li>Systems are arranged in a spiral with 3 full rotations</li>
            <li>Height increases with system index (sorted by Î²)</li>
            <li>Colors indicate Field Type classification</li>
            <li>Every 3 systems â†’ one Î¦-leap (Î¦^(1/3) Ã— Î¦^(1/3) Ã— Î¦^(1/3) â‰ˆ Î¦)</li>
        </ul>
        <p>
            <strong>Interaction:</strong> Rotate (drag), zoom (scroll), hover for details
        </p>
        <p>
            <strong>Triadic Structure:</strong> Notice how systems cluster in 3-system groups, with each group scaling by <code>Î¦ â‰ˆ 1.618</code>
        </p>
    </div>

    <script>
        // UTAC Systems Data
        const systems = [
            {id: "theta_plasticity", name: "Theta Plasticity", beta: 2.50, field_type: "Weakly Coupled", color: "#a8dadc"},
            {id: "critique_empathy", name: "Critique Empathy", beta: 2.51, field_type: "Weakly Coupled", color: "#a8dadc"},
            {id: "llm_resonance", name: "LLM Resonance", beta: 3.16, field_type: "Weakly Coupled", color: "#a8dadc"},
            {id: "heart_rate_variability", name: "Heart Rate Variability", beta: 3.20, field_type: "Weakly Coupled", color: "#a8dadc"},
            {id: "llm_emergence", name: "LLM Emergence", beta: 3.47, field_type: "High-Dimensional", color: "#457b9d"},
            {id: "seismic_precursor", name: "Seismic Precursor", beta: 3.98, field_type: "High-Dimensional", color: "#457b9d"},
            {id: "astrophysics_dark_matter", name: "Dark Matter", beta: 4.01, field_type: "High-Dimensional", color: "#457b9d"},
            {id: "amoc", name: "AMOC Collapse", beta: 4.20, field_type: "Strongly Coupled", color: "#1d3557"},
            {id: "ocean_co2", name: "Ocean CO2", beta: 4.35, field_type: "High-Dimensional", color: "#457b9d"},
            {id: "neuro_kosmos", name: "Neuro-Kosmos Bridge", beta: 4.80, field_type: "Strongly Coupled", color: "#1d3557"},
            {id: "collective_reasoning", name: "Collective Reasoning", beta: 5.12, field_type: "Strongly Coupled", color: "#1d3557"},
            {id: "critique_coherence", name: "Critique Coherence", beta: 5.25, field_type: "Strongly Coupled", color: "#1d3557"},
            {id: "neural_threshold", name: "Neural Threshold", beta: 5.80, field_type: "Strongly Coupled", color: "#1d3557"},
            {id: "climate_tipping", name: "Climate Tipping Point", beta: 9.23, field_type: "Physically Constrained", color: "#e63946"},
            {id: "urban_heat", name: "Urban Heat Island", beta: 16.28, field_type: "Meta-Adaptive", color: "#f77f00"}
        ];

        // Calculate spiral positions
        function spiralPosition(beta, index, totalSystems) {
            const radius = beta / 4.0;  // Scale factor
            const angle = (index / totalSystems) * 2 * Math.PI * 3;  // 3 rotations
            const height = index * 0.5;  // Vertical spacing

            return {
                x: radius * Math.cos(angle),
                y: height,
                z: radius * Math.sin(angle)
            };
        }

        // Generate spiral path (smooth tube)
        const spiralPathPoints = [];
        for (let i = 0; i < 100; i++) {
            const t = i / 100;
            const beta_interp = 2.5 + t * (16.28 - 2.5);
            const pos = spiralPosition(beta_interp, t * 15, 15);
            spiralPathPoints.push(pos);
        }

        // Spiral path trace
        const spiralPath = {
            type: 'scatter3d',
            mode: 'lines',
            x: spiralPathPoints.map(p => p.x),
            y: spiralPathPoints.map(p => p.y),
            z: spiralPathPoints.map(p => p.z),
            line: {
                color: '#457b9d',
                width: 4
            },
            opacity: 0.3,
            name: 'Spiral Path',
            hoverinfo: 'skip'
        };

        // System orbs (grouped by Field Type)
        const fieldTypes = [...new Set(systems.map(s => s.field_type))];

        const traces = [spiralPath];

        fieldTypes.forEach(fieldType => {
            const systemsOfType = systems.filter(s => s.field_type === fieldType);

            const positions = systemsOfType.map((s, i) => {
                const globalIndex = systems.indexOf(s);
                return spiralPosition(s.beta, globalIndex, systems.length);
            });

            const trace = {
                type: 'scatter3d',
                mode: 'markers+text',
                x: positions.map(p => p.x),
                y: positions.map(p => p.y),
                z: positions.map(p => p.z),
                text: systemsOfType.map(s => s.name),
                textposition: 'top center',
                textfont: {
                    size: 10,
                    color: systemsOfType[0].color
                },
                hovertext: systemsOfType.map(s =>
                    `<b>${s.name}</b><br>` +
                    `Î²: ${s.beta.toFixed(2)}<br>` +
                    `Field Type: ${s.field_type}<br>` +
                    `Î¦^(1/3) Layer: ${Math.round(Math.log(s.beta / 2.5) / Math.log(1.174))}`
                ),
                hoverinfo: 'text',
                marker: {
                    size: systemsOfType.map(s => 8 + (s.beta / 2)),  // Size ~ Î²
                    color: systemsOfType[0].color,
                    line: {
                        color: '#ffffff',
                        width: 1
                    }
                },
                name: fieldType
            };

            traces.push(trace);
        });

        // Layout
        const layout = {
            title: {
                text: 'UTAC Î²-Hierarchy: Î¦^(1/3) Spiral',
                font: {
                    color: '#f77f00',
                    size: 24
                }
            },
            scene: {
                xaxis: {title: 'X', gridcolor: '#1d3557', backgroundcolor: '#0a192f'},
                yaxis: {title: 'Height (Index)', gridcolor: '#1d3557', backgroundcolor: '#0a192f'},
                zaxis: {title: 'Z', gridcolor: '#1d3557', backgroundcolor: '#0a192f'},
                bgcolor: '#0a192f',
                camera: {
                    eye: {x: 1.5, y: 1.5, z: 1.5}
                }
            },
            paper_bgcolor: '#0a192f',
            plot_bgcolor: '#0a192f',
            font: {
                color: '#ffffff'
            },
            showlegend: true,
            legend: {
                x: 0.02,
                y: 0.98,
                bgcolor: 'rgba(29,53,87,0.8)',
                bordercolor: '#457b9d',
                borderwidth: 1
            }
        };

        // Render
        Plotly.newPlot('plot', traces, layout, {responsive: true});

        // Add triadic markers (every 3 systems)
        const triadicIndices = [0, 3, 6, 9, 12];
        const triadicPositions = triadicIndices.map(i => spiralPosition(systems[i].beta, i, systems.length));

        const triadicTrace = {
            type: 'scatter3d',
            mode: 'markers',
            x: triadicPositions.map(p => p.x),
            y: triadicPositions.map(p => p.y),
            z: triadicPositions.map(p => p.z),
            marker: {
                size: 15,
                color: '#f77f00',
                symbol: 'diamond',
                line: {
                    color: '#ffffff',
                    width: 2
                }
            },
            name: 'Î¦-Leaps (every 3)',
            hovertext: triadicIndices.map(i =>
                `<b>Î¦-Leap ${i/3}</b><br>` +
                `System: ${systems[i].name}<br>` +
                `Î²: ${systems[i].beta.toFixed(2)}<br>` +
                `Predicted: ${(2.5 * Math.pow(1.618, i/3)).toFixed(2)}`
            ),
            hoverinfo: 'text'
        };

        Plotly.addTraces('plot', triadicTrace);

        console.log("âœ… UTAC Î¦^(1/3) Spiral Visualization loaded");
        console.log("Î¦^(1/3) â‰ˆ 1.174 (observed: 1.178, 0.31% error)");
        console.log("Every 3 systems â†’ Î¦-leap (1.174Â³ â‰ˆ 1.618)");
    </script>
</body>
</html>
